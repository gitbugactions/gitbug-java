{"repository": "ballerina-platform/lsp4intellij", "language": "java", "clone_url": "https://github.com/ballerina-platform/lsp4intellij.git", "collection_timestamp": "2023-11-26T10:26:59.408491Z", "commit_hash": "8b03eddead47f04da18c51534a558654206eeae6", "commit_message": "Encode special characters in filepath before converting path to URI\n", "commit_timestamp": "2023-07-27T21:58:15Z", "previous_commit_hash": "e194fe9ff5f079b81dd9ba48520524d1757900ab", "previous_commit_message": "Merge pull request #321 from jselbo/master\n\nFix NPE in status widget dispose", "previous_commit_timestamp": "2023-07-17T07:55:45Z", "time_to_patch": "10 days, 14:02:30", "bug_patch": "diff --git a/src/main/java/org/wso2/lsp4intellij/utils/FileUtils.java b/src/main/java/org/wso2/lsp4intellij/utils/FileUtils.java\nindex 01c1edd..9231c7d 100644\n--- a/src/main/java/org/wso2/lsp4intellij/utils/FileUtils.java\n+++ b/src/main/java/org/wso2/lsp4intellij/utils/FileUtils.java\n@@ -198,12 +198,7 @@ public class FileUtils {\n      * @return the URI\n      */\n     public static String VFSToURI(VirtualFile file) {\n-        try {\n-            return sanitizeURI(new URL(file.getUrl().replace(\" \", SPACE_ENCODED)).toURI().toString());\n-        } catch (MalformedURLException | URISyntaxException e) {\n-            LOG.warn(e);\n-            return null;\n-        }\n+        return file == null? null : pathToUri(file.getPath());\n     }\n \n     /**\n@@ -286,7 +281,7 @@ public class FileUtils {\n      * @return The uri\n      */\n     public static String pathToUri(@Nullable String path) {\n-        return path != null ? sanitizeURI(new File(path.replace(\" \", SPACE_ENCODED)).toURI().toString()) : null;\n+        return path != null ? sanitizeURI(new File(path).toURI().toString()) : null;\n     }\n \n     public static String projectToUri(Project project) {\n", "bug_patch_file_extensions": ["java"], "test_patch": "diff --git a/src/test/java/org/wso2/lsp4intellij/utils/FileUtilsTest.java b/src/test/java/org/wso2/lsp4intellij/utils/FileUtilsTest.java\nindex f074b4e..f38eede 100644\n--- a/src/test/java/org/wso2/lsp4intellij/utils/FileUtilsTest.java\n+++ b/src/test/java/org/wso2/lsp4intellij/utils/FileUtilsTest.java\n@@ -101,8 +101,13 @@ public class FileUtilsTest {\n     }\n \n     @Test\n-    public void testVFSToURINull() {\n-        Assert.assertNull(FileUtils.VFSToURI((new LightVirtualFile())));\n+    public void testVFSToURINotNull() {\n+        // LightVirtualFile returns '/' as path\n+        String uri = FileUtils.VFSToURI((new LightVirtualFile()));\n+        Assert.assertNotNull(uri);\n+\n+        String expectedUri = OSUtils.isWindows() ? \"file:///C:/\" : \"file:///\";\n+        Assert.assertEquals(expectedUri, uri);\n     }\n \n     @Test\n", "test_patch_file_extensions": ["java"], "non_code_patch": "", "non_code_patch_file_extensions": [], "change_type": "SOURCE_ONLY", "actions_runs": [[{"failed": false, "tests": [{"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testVFSToURI", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testVFSToURINull", "time": 2.827, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testSanitizeURIUnix", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testIsFileSupported", "time": 1.8, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testIsEditorSupported", "time": 4.074, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testEditorFromVirtualFile", "time": 5.456, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testURIToVFS", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testVirtualFileFromURI", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testVirtualFileFromURINull", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testSanitizeURIWindows", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testURIToVFSNull", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testEditorToProjectFolderPath", "time": 4.479, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testProjectToUri", "time": 3.77, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsDoubleQuote", "time": 0.003, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testStringToListSepNull", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsSlash", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsSpace", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testConcatenateArrays", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsC", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testStringToList", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsSingleQuote", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}], "workflow": {"path": "/tmp/4de21194-20e6-427d-ba72-118669a15f63/.github/workflows/main-crawler.yml", "type": "gradle"}, "workflow_name": "3f52a410-973f-4a32-90bb-4e73177297be", "build_tool": "gradle", "elapsed_time": 358.1601951122284, "default_actions": false}], [{"failed": false, "tests": [{"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testVFSToURI", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testVFSToURINotNull", "time": 2.758, "results": [{"result": "Failure", "message": "java.lang.AssertionError", "type": "java.lang.AssertionError"}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testSanitizeURIUnix", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testIsFileSupported", "time": 1.791, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testEditorFromVirtualFile", "time": 4.765, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testURIToVFS", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testVirtualFileFromURI", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testVirtualFileFromURINull", "time": 0.001, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testSanitizeURIWindows", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testURIToVFSNull", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testEditorToProjectFolderPath", "time": 4.022, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testProjectToUri", "time": 3.414, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testIsEditorSupported", "time": 5.095, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsDoubleQuote", "time": 0.006, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testStringToListSepNull", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsSlash", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsSpace", "time": 0.001, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testConcatenateArrays", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsC", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testStringToList", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsSingleQuote", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}], "workflow": {"path": "/tmp/4de21194-20e6-427d-ba72-118669a15f63/.github/workflows/main-crawler.yml", "type": "gradle"}, "workflow_name": "32b035c0-435a-4e3b-8010-bfab25bbfeb1", "build_tool": "gradle", "elapsed_time": 293.34190106391907, "default_actions": false}], [{"failed": false, "tests": [{"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testVFSToURI", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testVFSToURINotNull", "time": 2.863, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testSanitizeURIUnix", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testIsFileSupported", "time": 1.818, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testEditorFromVirtualFile", "time": 5.501, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testVirtualFileFromURI", "time": 0.001, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testVirtualFileFromURINull", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testSanitizeURIWindows", "time": 0.002, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testURIToVFSNull", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testEditorToProjectFolderPath", "time": 4.805, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testProjectToUri", "time": 3.381, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testIsEditorSupported", "time": 4.667, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.FileUtilsTest", "name": "testURIToVFS", "time": 0.0, "results": [{"result": "Skipped", "message": null, "type": null}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsDoubleQuote", "time": 0.004, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testStringToListSepNull", "time": 0.001, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsSlash", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsSpace", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testConcatenateArrays", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsC", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testStringToList", "time": 0.0, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}, {"classname": "org.wso2.lsp4intellij.utils.UtilsTest", "name": "testParseArgsSingleQuote", "time": 0.002, "results": [{"result": "Passed", "message": "", "type": ""}], "stdout": null, "stderr": null}], "workflow": {"path": "/tmp/4de21194-20e6-427d-ba72-118669a15f63/.github/workflows/main-crawler.yml", "type": "gradle"}, "workflow_name": "578cee3a-45a6-463c-beaa-ab1f48c3f156", "build_tool": "gradle", "elapsed_time": 265.1948573589325, "default_actions": false}]], "strategy": "PASS_PASS", "issues": []}
